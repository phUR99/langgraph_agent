## 서브 그래프
### 서브그래프 개요
- 주요 특징
  - 각 서브 그래프는 독립적인 상태 관리 가능
  - 메인 그래프와 서브 그래프 간의  정보 교환을 지원
  - 모듈화된 설계로 복잡한 워크플로 구현 용이
- 구현 방법
  - 서브그래프 상태 정의
  - 서브그래프 노드 및 엣지 구성
  - 메인 그래프의 서브그래프 통합
### 병렬 노드 실행
- 병렬 노드 실행은 전체 그래프 작업속도를 높이는 데 필수
- 랭그래프는 노드의 병렬 실행을 기본적으로 지원
- 팬아웃과 팬인 메커니즘을 통해 구현
### 조건부 엣지로 병렬 노드 실행
- 조건부 엣지는 실행 시간에 동적으로 경로를 결정
- 특정 조건에 따라서 다른 노드 세트를 병렬로 실행 가능

## CRAG 개요
#### 기존 RAG를 개선하여 검색된 정보의 품질과 관련성을 향상시키는 접근 방식
#### 문서 관련성 평가, 지식 정제, 필요 시 외부 지식 탐색, 정제된 지식을 바탕으로 답변 생성.
## 5. Corrective RAG (CRAG) 구현
- CRAG (Corrective Retrieval-Augmented Generation) 
- 논문: https://arxiv.org/pdf/2401.15884

- 주요 과정: 검색 -> 평가 -> 지식 정제 또는 웹 검색 -> 답변 생성

   1. 문서 관련성 평가 (`grade_documents`):
      - 각 문서의 관련성을 평가
      - 기준을 통과하는 문서만을 유지

   1. 지식 정제 (`refine_knowledge`):
      - 문서를 "지식 조각"으로 분할하고 각각의 관련성을 평가
      - 관련성 높은(0.5 초과) 지식 조각만 유지

   1. 웹 검색 (`web_search`):
      - 문서가 충분한 정보를 담지 못한 경우 외부 지식을 활용
      - 웹 검색 결과를 기존 문서에 추가 

   1. 답변 생성 (`generate_answer`):
      - 정제된 지식 조각을 사용하여 답변을 생성
      - 관련 정보가 없을 경우 적절한 메시지를 반환

